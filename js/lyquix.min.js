var lqx=lqx||{settings:{debug:!1,logger:{enable:!1,namespaces:["window","jQuery","lqx"]},tracking:{downloads:!0,outbound:!0,scrolldepth:!0,photogallery:!0,video:!0,activetime:!0},shadeColorPercent:{lighter:20,light:10,dark:-10,darker:-20},resizeThrottle:{duration:15},scrollThrottle:{duration:15},bodyScreenSize:{min:0,max:4,breakPoints:[320,640,960,1280,1600],sizes:["xs","sm","md","lg","xl"]},equalHeightRows:{refreshElems:!1,onlyVisible:!0,checkPageLoad:!0},lyqBox:{lyqboxHTMLContent:'<div class="lyqbox"><div class="content-wrapper"><div class="content"></div><div class="info"><div class="title"></div><div class="caption"></div><div class="credit"></div></div></div><div class="content-wrapper"><div class="content"></div><div class="info"><div class="title"></div><div class="caption"></div><div class="credit"></div></div></div><div class="close"></div><div class="prev"></div><div class="next"></div><div class="counter"><span class="current"></span> of <span class="total"></span></div></div>'},userActive:{idleTime:5e3,throttle:100,refresh:250,maxTime:18e5},ga:{createParams:null,setParams:null,requireParams:null,provideParams:null,customParamsFuncs:null,abTestName:null,abTestNameDimension:null,abTestGroupDimension:null},geoLocation:{enable:!1,gps:!1},mobileMenu:{screens:["sm","xs"]},detectSwipe:{minX:30,maxX:60,minY:30,maxY:60},uniqueFormURL:{enable:!0,selector:"form"}},vars:{resizeThrottle:!1,scrollThrottle:!1,youTubeIframeAPIReady:!1,youTubeIframeAPIReadyAttempts:0},setOptions:function(e){return"object"==typeof e&&jQuery.extend(!0,lqx.settings,e),lqx.settings},log:function(){lqx.settings.debug&&console.log(arguments)},warn:function(){lqx.settings.debug&&console.warn(arguments)},error:function(){lqx.settings.debug&&console.error(arguments)},initLogging:function(){lqx.settings.logger.enable&&lqx.settings.logger.namespaces.forEach(function(e){lqx.addLoggingToNamespace(e)})},addLoggingToNamespace:function(e){namespaceObject="window"==e?window:window[e],Object.keys(namespaceObject).forEach(function(t,a){"[object Function]"===Object.prototype.toString.call(t)&&(namespaceObject[a]=lqx.getLoggableFunction(t,a,e))})},getLoggableFunction:function(e,t,a){return function(){return console.log("LOG: executing "+a+"."+t+" with arguments:"),console.log(arguments),e.apply(this,arguments)}},cookie:function(e,t,a){if(0===arguments.length||!e)return!1;if(1==arguments.length)return decodeURIComponent(document.cookie.replace(RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;var n=encodeURIComponent(e)+"="+encodeURIComponent(t);return"object"==typeof a&&("maxAge"in a&&(n+="; max-age="+parseInt(a.maxAge)),"expires"in a&&a.expires instanceof Date&&(n+="; expires="+a.expires.toUTCString()),"path"in a&&(n+="; path="+a.path),"domain"in a&&(n+="; domain="+a.domain),"secure"in a&&(n+="; secure"),"httpOnly"in a&&(n+="; httponly")),document.cookie=n,!0},bodyScreenSize:function(){var e=jQuery(window).width();e<lqx.settings.bodyScreenSize.breakPoints[1]&&(s=0),e<lqx.settings.bodyScreenSize.breakPoints[1]||(s=1),e<lqx.settings.bodyScreenSize.breakPoints[2]||(s=2),e<lqx.settings.bodyScreenSize.breakPoints[3]||(s=3),e<lqx.settings.bodyScreenSize.breakPoints[4]||(s=4),s<lqx.settings.bodyScreenSize.min&&(s=lqx.settings.bodyScreenSize.min),s>lqx.settings.bodyScreenSize.max&&(s=lqx.settings.bodyScreenSize.max),lqx.settings.bodyScreenSize.sizes[s]!=lqx.vars.lastScreenSize&&(jQuery("body").attr("screen",lqx.settings.bodyScreenSize.sizes[s]),lqx.vars.lastScreenSize=lqx.settings.bodyScreenSize.sizes[s],jQuery(document).trigger("screensizechange"))},bodyScreenOrientation:function(){if("orientation"in window.screen)switch(window.screen.orientation.type){case"portrait-primary":case"portrait-secondary":lqx.vars.lastScreenOrientation="portrait",jQuery("body").attr("orientation","portrait");break;case"landscape-primary":case"landscape-secondary":lqx.vars.lastScreenOrientation="landscape",jQuery("body").attr("orientation","landscape")}},geoLocate:function(){lqx.settings.geoLocation.enable&&jQuery.ajax({cache:!1,complete:function(){lqx.settings.geoLocation.gps&&"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){lqx.vars.geoLocation.lat=e.coords.latitude,lqx.vars.geoLocation.lon=e.coords.longitude,lqx.vars.geoLocation.radius=0}),lqx.vars.geoLocation.city&&jQuery("body").attr("city",lqx.vars.geoLocation.city),lqx.vars.geoLocation.subdivision&&jQuery("body").attr("subdivision",lqx.vars.geoLocation.subdivision),lqx.vars.geoLocation.country&&jQuery("body").attr("country",lqx.vars.geoLocation.country),lqx.vars.geoLocation.continent&&jQuery("body").attr("continent",lqx.vars.geoLocation.continent),lqx.vars.geoLocation.time_zone&&jQuery("body").attr("time-zone",lqx.vars.geoLocation.time_zone)},dataType:"json",error:function(){lqx.vars.geoLocation={city:null,subdivision:null,country:null,continent:null,time_zone:null,lat:null,lon:null,radius:null}},success:function(e){lqx.vars.geoLocation=e},url:lqx.vars.tmplURL+"/php/ip2geo/"})},mobileDetect:function(){var e=new MobileDetect(window.navigator.userAgent),t={mobile:!1,phone:!1,tablet:!1};return null!==e.mobile()&&(t.mobile=!0,jQuery("body").addClass("mobile"),null!==e.phone()&&(t.phone=!0,jQuery("body").addClass("phone")),null!==e.tablet()&&(t.tablet=!0,jQuery("body").addClass("tablet"))),t},getBrowser:function(){function e(e){var t=n.match(e);return t&&t.length>1&&t[1]||""}function t(e){var t=n.match(e);return t&&t.length>1&&t[2]||""}var a,n=navigator.userAgent;return/opera|opr/i.test(n)?a={name:"Opera",type:"opera",version:e(/version\/(\d+(\.\d+)?)/i)||e(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/msie|trident/i.test(n)?a={name:"Internet Explorer",type:"msie",version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(n)?a={name:"Microsft Edge",type:"msedge",version:e(/edge\/(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(n)?a={name:"Google Chrome",type:"chrome",version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/firefox/i.test(n)?a={name:"Firefox",type:"firefox",version:e(/(?:firefox)[ \/](\d+(\.\d+)?)/i)}:!/like android/i.test(n)&&/android/i.test(n)?a={name:"Android",type:"android",version:e(/version\/(\d+(\.\d+)?)/i)}:/safari/i.test(n)?a={name:"Safari",type:"safari",version:e(/version\/(\d+(\.\d+)?)/i)}:(a={name:e(/^(.*)\/(.*) /),version:t(/^(.*)\/(.*) /)},a.type=a.name.toLowerCase().replace(/\s/g,"")),a.type&&a.version&&jQuery(document).ready(function(){jQuery("body").addClass(a.type),jQuery("body").addClass(a.type+"-"+a.version.split(".")[0]),jQuery("body").addClass(a.type+"-"+a.version.replace(/\./g,"-"))}),a}(),getOS:function(){function e(e){var t=n.match(e);return t&&t.length>1&&t[1]||""}function t(e){var t=n.match(e);return t&&t.length>1&&t[2]||""}var a,n=navigator.userAgent;return/(ipod|iphone|ipad)/i.test(n)?a={name:"iOS",type:"ios",version:e(/os (\d+([_\s]\d+)*) like mac os x/i).replace(/[_\s]/g,".")}:/windows phone/i.test(n)?a={name:"Windows Phone",type:"windowsphone",version:e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i)}:!/like android/i.test(n)&&/android/i.test(n)?a={name:"Android",type:"android",version:e(/android[ \/-](\d+(\.\d+)*)/i)}:/windows nt/i.test(n)?a={name:"Windows",type:"windows",version:e(/windows nt (\d+(\.\d+)*)/i)}:/mac os x/i.test(n)?a={name:"Mac OS X",type:"macosx",version:e(/mac os x (\d+([_\s]\d+)*)/i).replace(/[_\s]/g,".")}:/ubuntu/i.test(n)?a={name:"Ubuntu",type:"ubuntu",version:e(/ubuntu\/(\d+(\.\d+)*)/i)}:/fedora/i.test(n)?a={name:"Fedora",type:"fedora",version:e(/fedora\/(\d+(\.\d+)*)/i)}:/CrOS/.test(n)&&(a={name:"Chrome OS",type:"chromeos",version:t(/cros (.+) (\d+(\.\d+)*)/i)}),a.type&&a.version&&jQuery(document).ready(function(){jQuery("body").addClass(a.type),jQuery("body").addClass(a.type+"-"+a.version.split(".")[0]),jQuery("body").addClass(a.type+"-"+a.version.replace(/\./g,"-"))}),a}(),browserFixes:function(){"msie"==lqx.getBrowser.type&&(jQuery("img").each(function(){var e=jQuery(this);if(void 0===e.attr("width")){var t=new Image;t.onload=function(){e.attr("width",t.width)},t.src=e.attr("src")}}),lqx.getBrowser.version<10||jQuery("<style>html, sup, sub, samp, td, th, h1, h2, h3, .font-monospace, .font-smallcaps, .font-uppercase {font-feature-settings: normal;}</style>").appendTo("head"),lqx.getBrowser.version>8||jQuery("img").each(function(){src=jQuery(this).attr("src"),/\.svg$/i.test(src)&&jQuery(this).attr("src",src.replace(".svg",".png"))}))},initEqualHeightRows:function(){lqx.vars.equalHeightRowElems=jQuery(lqx.settings.equalHeightRows.onlyVisible?".equalheightrow:visible":".equalheightrow"),lqx.vars.equalHeightRowImgs=lqx.vars.equalHeightRowElems.find("img"),lqx.vars.equalHeightRowPageLoaded=!1,jQuery(window).load(function(){lqx.vars.equalHeightRowPageLoaded=!0}),lqx.equalHeightRows()},equalHeightRows:function(e){var t=lqx.settings.equalHeightRows;"object"==typeof e&&jQuery.extend(!0,t,e),(t.refreshElems||void 0===lqx.vars.equalHeightRowElems)&&(lqx.vars.equalHeightRowElems=jQuery(lqx.settings.equalHeightRows.onlyVisible?".equalheightrow:visible":".equalheightrow"),lqx.vars.equalHeightRowImgs=lqx.vars.equalHeightRowElems.find("img"));var a=lqx.vars.equalHeightRowElems.length;jQuery.Deferred().done(function(){lqx.vars.equalHeightRowElems.height("auto")},function(){var e,t=0,n=0,o=[],r=0,i=0;lqx.vars.equalHeightRowElems.each(function(l){e=jQuery(this),t=e.offset().top,n=e.height();var s=0;if(t!=r){if(o.length>1)for(s=0;s<o.length;s++)o[s].height(i);o=Array(e),r=e.offset().top,i=n}else if(o.push(e),i=n>i?n:i,l==a-1&&o.length>1)for(s=0;s<o.length;s++)o[s].height(i)})},function(){lqx.settings.equalHeightRows.checkPageLoad&&lqx.vars.equalHeightRowPageLoaded||lqx.vars.equalHeightRowImgs.each(function(){this.complete||setTimeout(function(){lqx.equalHeightRows(e)},250)})}).resolve()},hangingPunctuation:function(){lqx.vars.hangingMarks={"“":"medium","‘":"small",'"':"medium","'":"small","«":"large","‹":"medium","„":"medium","‚":"small"},jQuery(".hanging-punctuation").find("p").each(function(e,t){lqx.hangPunctuation(t)})},hangPunctuation:function(e){var t=e.innerText||e.textContent;for(var a in lqx.vars.hangingMarks)if(0===t.indexOf(a)){jQuery(e).append('<span id="hangingMark">'+a+"</span>");var n=jQuery("#hangingMark").outerWidth();jQuery(e).css("text-indent","-"+n+"px"),jQuery("#hangingMark").remove()}},imageCaption:function(){jQuery(".image.caption img").each(function(e,t){var a=jQuery(t).attr("alt");a&&jQuery(t).after('<div class="caption">'+a+"</div>")})},lineBreakSymbol:function(){jQuery(".show-line-break p br").each(function(e,t){jQuery(t).before(String.fromCharCode(8626))})},shadeColor:function(){["color","bg","border"].forEach(function(e){["lighter","light","dark","darker"].forEach(function(t){var a,n="."+e+"-"+t;switch(e){case"color":a="color";break;case"bg":a="background-color";break;case"border":a="border-color"}jQuery(n).each(function(e,n){var o=jQuery(n).css(a);o="#"==o.charAt(0)?lqx.shadeHex(o,lqx.settings.shadeColorPercent[t]):lqx.shadeRGB(o,lqx.settings.shadeColorPercent[t]),jQuery(n).css(a,o)})})})},shadeHex:function(e,t){var a=parseInt(e.slice(1),16),n=Math.round(2.55*t),o=(a>>16)+n,r=(a>>8&255)+n,i=(255&a)+n;return"#"+(16777216+65536*(255>o?1>o?0:o:255)+256*(255>r?1>r?0:r:255)+(255>i?1>i?0:i:255)).toString(16).slice(1)},shadeRGB:function(e,t){var a=e.split(","),n=0>t?0:255,o=0>t?-1*t:t,r=parseInt(a[0].slice(4)),i=parseInt(a[1]),l=parseInt(a[2]);return"rgb("+(Math.round((n-r)*o)+r)+","+(Math.round((n-i)*o)+i)+","+(Math.round((n-l)*o)+l)+")"},initTracking:function(){if((lqx.settings.tracking.outbound||lqx.settings.tracking.download)&&jQuery("a").each(function(){var e=this;e.href&&(lqx.settings.tracking.outbound&&e.host!=location.host?jQuery(e).click(function(t){t.preventDefault();var a=e.href,n=a;jQuery(e).attr("title")&&(n=jQuery(e).attr("title")+" ["+a+"]"),ga("send",{hitType:"event",eventCategory:"Outbound Links",eventAction:"click",eventLabel:n,nonInteraction:!0,hitCallback:function(){window.location.href=a}})}):lqx.settings.tracking.downloads&&null===e.pathname.match(/\.(htm|html|php)$/i)[1]&&jQuery(e).click(function(t){t.preventDefault();var a=e.href,n=e.protocol+"//"+e.hostname+e.pathname+e.search,o=e.pathname+e.search,r="Download: "+o;jQuery(e).attr("title")&&(r=jQuery(e).attr("title")),ga("send",{hitType:"pageview",location:n,page:o,title:r,hitCallback:function(){window.location.href=a}})}))}),lqx.settings.tracking.scrolldepth&&(lqx.vars.scrollDepthMax=10*Math.ceil((jQuery(window).scrollTop()+jQuery(window).height())/jQuery(document).height()*10),jQuery(window).on("scrollthrottle",function(){lqx.vars.scrollDepthMax<100&&(lqx.vars.scrollDepthMax=Math.max(lqx.vars.scrollDepthMax,10*Math.ceil((jQuery(window).scrollTop()+jQuery(window).height())/jQuery(document).height()*10)),lqx.vars.scrollDepthMax>100&&(lqx.vars.scrollDepthMax=100))}),jQuery(window).on("unload",function(){ga("send",{hitType:"event",eventCategory:"Scroll Depth",eventAction:lqx.vars.scrollDepthMax,nonInteraction:!0})})),lqx.settings.tracking.photogallery&&(jQuery("html").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(){ga("send",{hitType:"event",eventCategory:"Photo Gallery",eventAction:"Open"})}),jQuery("html").on("load","img.lb-image",function(){ga("send",{hitType:"event",eventCategory:"Photo Gallery",eventAction:"Display",eventLabel:jQuery(this).attr("src")})})),lqx.settings.tracking.video){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",e.onload=function(){lqx.vars.youTubeIframeAPIReady=!0};var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.addEventListener?window.addEventListener("message",lqx.vimeoReceiveMessage,!1):window.attachEvent("onmessage",lqx.vimeoReceiveMessage,!1),lqx.vars.youtubePlayers={},lqx.vars.vimeoPlayers={},jQuery("iframe").each(function(){var e=jQuery(this);lqx.initVideoPlayerAPI(e)})}lqx.settings.tracking.activetime&&jQuery(window).on("unload",function(){ga("send",{hitType:"event",eventCategory:"User Active Time",eventAction:"Percentage",eventValue:parseInt(100*lqx.vars.userActive.activeTime/(lqx.vars.userActive.activeTime+lqx.vars.userActive.inactiveTime)),nonInteraction:!0}),ga("send",{hitType:"event",eventCategory:"User Active Time",eventAction:"Active Time (ms)",eventValue:parseInt(lqx.vars.userActive.activeTime),nonInteraction:!0}),ga("send",{hitType:"event",eventCategory:"User Active Time",eventAction:"Inactive Time (ms)",eventValue:parseInt(lqx.vars.userActive.inactiveTime),nonInteraction:!0})})},videoPlayerMutationHandler:function(e){jQuery(e.addedNodes).each(function(){var e=jQuery(this);if(void 0!==e.prop("tagName")){var t=e.prop("tagName").toLowerCase();"iframe"==t&&lqx.initVideoPlayerAPI(e)}})},initVideoPlayerAPI:function(e){var t,a=e.attr("src"),n=e.attr("id");void 0!==a&&(-1!=a.indexOf("youtube.com/embed/")&&(void 0===n&&(n="youtubePlayer"+Object.keys(lqx.vars.youtubePlayers).length,e.attr("id",n)),-1==a.indexOf("enablejsapi=1")&&(t="&",-1==a.indexOf("?")&&(t="?"),e.attr("src",a+t+"enablejsapi=1&version=3")),void 0===lqx.vars.youtubePlayers[n]&&(lqx.vars.youtubePlayers[n]={},onYouTubeIframeAPIReady())),-1!=a.indexOf("player.vimeo.com/video/")&&(void 0===n&&(n="vimeoPlayer"+Object.keys(lqx.vars.vimeoPlayers).length,e.attr("id",n)),-1==a.indexOf("api=1")&&(t="&",-1==a.indexOf("?")&&(t="?"),e.attr("src",a+t+"api=1&player_id="+n)),void 0===lqx.vars.vimeoPlayers[n]&&(lqx.vars.vimeoPlayers[n]={})))},youtubePlayerReady:function(e,t){if(jQuery("#"+t).length){if("function"!=typeof lqx.vars.youtubePlayers[t].playerObj.getPlayerState);else if(void 0===lqx.vars.youtubePlayers[t].progress){lqx.vars.youtubePlayers[t].progress=0,lqx.vars.youtubePlayers[t].start=!1,lqx.vars.youtubePlayers[t].complete=!1;var a=lqx.vars.youtubePlayers[t].playerObj.getVideoData();lqx.vars.youtubePlayers[t].title=a.title,lqx.vars.youtubePlayers[t].duration=lqx.vars.youtubePlayers[t].playerObj.getDuration(),lqx.vars.youtubePlayers[t].start||lqx.youtubePlayerStateChange(e,t)}}else delete lqx.vars.youtubePlayers[t]},youtubePlayerStateChange:function(e,t){if(jQuery("#"+t).length){var a;0!==lqx.vars.youtubePlayers[t].playerObj.getPlayerState()||lqx.vars.youtubePlayers[t].complete||(a="Complete",lqx.vars.youtubePlayers[t].complete=!0),1==lqx.vars.youtubePlayers[t].playerObj.getPlayerState()&&(lqx.vars.youtubePlayers[t].timer=setTimeout(function(){lqx.youtubePlayerStateChange(e,t)},1e3),lqx.vars.youtubePlayers[t].start?(currentTime=lqx.vars.youtubePlayers[t].playerObj.getCurrentTime(),Math.ceil(Math.ceil(currentTime/lqx.vars.youtubePlayers[t].duration*100)/10)-1>lqx.vars.youtubePlayers[t].progress&&(lqx.vars.youtubePlayers[t].progress=Math.ceil(Math.ceil(currentTime/lqx.vars.youtubePlayers[t].duration*100)/10)-1,10!=lqx.vars.youtubePlayers[t].progress?a=10*lqx.vars.youtubePlayers[t].progress+"%":clearTimeout(lqx.vars.youtubePlayers[t].timer))):(a="Start",lqx.vars.youtubePlayers[t].start=!0)),3==lqx.vars.youtubePlayers[t].playerObj.getPlayerState()&&(lqx.vars.youtubePlayers[t].timer=setTimeout(function(){lqx.youtubePlayerStateChange(e,t)},1e3)),a&&lqx.videoTrackingEvent(t,a,lqx.vars.youtubePlayers[t].title,10*lqx.vars.youtubePlayers[t].progress)}else delete lqx.vars.youtubePlayers[t]},vimeoReceiveMessage:function(e){if(/^https?:\/\/player.vimeo.com/.test(e.origin)){var t=JSON.parse(e.data);player=lqx.vars.vimeoPlayers[t.player_id];var a;switch(t.event){case"ready":player.progress=0,player.start=!1,player.complete=!1,lqx.vimeoSendMessage(t.player_id,e.origin,"addEventListener","play"),lqx.vimeoSendMessage(t.player_id,e.origin,"addEventListener","finish"),lqx.vimeoSendMessage(t.player_id,e.origin,"addEventListener","playProgress");break;case"play":player.start||(a="Start",player.start=!0);break;case"playProgress":Math.ceil(Math.ceil(100*t.data.percent)/10)-1>player.progress&&(player.progress=Math.ceil(Math.ceil(100*t.data.percent)/10)-1,10!=player.progress&&(a=10*player.progress+"%"));break;case"finish":player.complete||(a="Complete",player.complete=!0)}a&&lqx.videoTrackingEvent(t.player_id,a,"No title",10*player.progress)}},vimeoSendMessage:function(e,t,a,n){var o={method:a};n&&(o.value=n),document.getElementById(e).contentWindow.postMessage(JSON.stringify(o),t)},videoTrackingEvent:function(e,t,a,n){ga("send",{hitType:"event",eventCategory:"Video",eventAction:t,eventLabel:a+" ("+jQuery("#"+e).attr("src").split("?")[0]+")",eventValue:n})},initMobileMenu:function(){jQuery("body").on("click",".horizontal ul.menu a, .vertical ul.menu a, .slide-out ul.menu a",function(e){e.preventDefault(),lqx.mobileMenu(this)}),jQuery("body").on("click",".horizontal, .vertical, .slide-out",function(e){e.stopPropagation()}),jQuery("body").on("click",".slide-out .menu-control",function(){var e=jQuery(this).parent();jQuery(e).hasClass("open")?jQuery(e).removeClass("open"):jQuery(e).addClass("open")}),jQuery("body").click(function(){jQuery(".horizontal, .vertical, .slide-out").find("ul.menu li.open").removeClass("open"),jQuery(".slide-out.open").removeClass("open")})},mobileMenu:function(e){var t=jQuery(e).parent(),a=e.href,n=e.target&&!e.target.match(/^_(self|parent|top)$/i)?e.target:!1,o=function(){n?window.open(a,n):window.location.href=a};-1!=jQuery.inArray(lqx.vars.lastScreenSize,lqx.settings.mobileMenu.screens)&&jQuery(t).hasClass("deeper")?jQuery(t).hasClass("open")?o():(jQuery(t).siblings("li.open").find("li.open").removeClass("open"),jQuery(t).siblings("li.open").removeClass("open"),jQuery(t).addClass("open")):o()},resetMobileMenus:function(){-1==jQuery.inArray(lqx.vars.lastScreenSize,lqx.settings.mobileMenu.screens)&&jQuery(".nav .parent").removeClass("open")},initMutationObserver:function(){var e=window.MutationObserver||window.WebKitMutationObserver;void 0!==e?(lqx.mutationObserver=new e(lqx.mutationHandler),lqx.mutationObserver.observe(jQuery("html")[0],{childList:!0,characterData:!0,attributes:!0,subtree:!0})):lqx.settings.tracking.video&&jQuery("html").on("DOMNodeInserted","iframe",function(e){lqx.initVideoPlayerAPI(jQuery(e.currentTarget))})},mutationHandler:function(e){e.forEach(function(e){switch(e.type){case"childList":e.addedNodes.length>0&&(lqx.videoPlayerMutationHandler(e),lqx.imageMutationHandler(e)),e.removedNodes.length>0;break;case"attributes":break;case"characterData":}})},initImgLoadAttr:function(){jQuery("img").each(function(){var e=jQuery(this);lqx.imgLoadAttr(e[0])})},imgLoadAttr:function(e){e=jQuery(e),e[0].complete?0===e[0].naturalWidth&&0===e[0].naturalHeight?e.attr("loaderror",""):e.attr("loadcomplete",""):(e.on("load",function(){e.attr("loadcomplete","")}),e.on("error",function(){e.attr("loaderror","")}))},imageMutationHandler:function(e){jQuery(e.addedNodes).each(function(){var e=jQuery(this);if(void 0!==e.prop("tagName")){var t=e.prop("tagName").toLowerCase();"img"==t&&lqx.imgLoadAttr(e[0])}})},lyqBox:{init:function(){if(jQuery("[data-lyqbox]").length){lqx.lyqBox.album=[],lqx.lyqBox.currentImageIndex=void 0,lqx.lyqBox.enable(),lqx.lyqBox.build();var e=lqx.lyqBox.alert(jQuery("[data-lyqbox-type=alert]"));e.always(function(){lqx.lyqBox.hash()})}},hash:function(){if(""!==window.location.hash.substr(1)){var e=window.location.hash.substr(1).split("_");jQuery("[data-lyqbox="+e[0]+"][data-lyqbox-alias="+e[1]+"]").length&&lqx.lyqBox.start(jQuery("[data-lyqbox="+e[0]+"][data-lyqbox-alias="+e[1]+"]"))}},alert:function(e){var t=jQuery.Deferred();if(1==e.length){var a="lyqbox-alert-"+e.attr("data-lyqbox"),n=localStorage.getItem(a);n?t.reject():(lqx.lyqBox.start(e),jQuery(".lyqbox .close").on("click",function(){var e="lyqbox-alert-"+lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].albumId;return localStorage.setItem(e,1),t.resolve(),lqx.lyqBox.end(),!1}))}else t.reject();return t.promise()},enable:function(){jQuery("body").on("click","[data-lyqbox]",function(e){return jQuery(".lyqbox").addClass("open"),lqx.lyqBox.start(jQuery(e.currentTarget)),!1})},build:function(){jQuery(lqx.settings.lyqBox.lyqboxHTMLContent).appendTo(jQuery("body")),lqx.lyqBox.overlay=jQuery(".lyqbox"),lqx.lyqBox.containerActive=lqx.lyqBox.overlay.find(".content-wrapper").first().addClass("active"),lqx.lyqBox.overlay.find(".content").on("click",function(){return!1}),lqx.lyqBox.overlay.on("click",function(){return"alert"==lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].type?!1:(lqx.lyqBox.end(),!1)}),lqx.detectSwipe(".lyqbox .content-wrapper",lqx.lyqBox.swipeHandler),lqx.lyqBox.overlay.find(".prev").on("click",function(){return lqx.lyqBox.changeContent(0===lqx.lyqBox.currentImageIndex?lqx.lyqBox.album.length-1:lqx.lyqBox.currentImageIndex-1),!1}),lqx.lyqBox.overlay.find(".next").on("click",function(){return lqx.lyqBox.changeContent(lqx.lyqBox.currentImageIndex===lqx.lyqBox.album.length-1?0:lqx.lyqBox.currentImageIndex+1),!1}),lqx.lyqBox.overlay.find(".close").on("click",function(){return"alert"==lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].type?!1:(lqx.lyqBox.end(),!1)})},stopVideo:function(e){"video"==e&&lqx.lyqBox.containerActive.find(".content.video .video-container iframe").remove()},start:function(e){function t(e){lqx.lyqBox.album.push({albumId:e.attr("data-lyqbox"),type:e.attr("data-lyqbox-type"),link:e.attr("data-lyqbox-url"),title:e.attr("data-lyqbox-title"),caption:e.attr("data-lyqbox-caption"),credit:e.attr("data-lyqbox-credit"),"class":e.attr("data-lyqbox-class"),alias:e.attr("data-lyqbox-alias"),html:e.attr("data-lyqbox-html")})}lqx.lyqBox.album=[];var a,n=0,o=e.attr("data-lyqbox");if(o){a=jQuery(e.prop("tagName")+'[data-lyqbox="'+o+'"]');for(var r=0;r<a.length;r=++r)t(jQuery(a[r])),a[r]===e[0]&&(n=r)}lqx.lyqBox.changeContent(n)},loadHTML:function(e){var t=jQuery.Deferred(),a=jQuery("<div></div>").load(e,function(e,n){"error"!==n&&t.resolve(a.contents()),t.fail()});return t.promise()},addHash:function(){lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].alias&&(window.location.hash=lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].albumId+"_"+lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].alias)},changeContent:function(e){lqx.lyqBox.disableKeyboardNav(),lqx.lyqBox.overlay.addClass("open");var t=jQuery.Deferred();switch(lqx.lyqBox.album[e].type){case"image":var a=jQuery("<img />"),n=new Image;n.src=lqx.lyqBox.album[e].link,n.onload=function(){var t;a.attr("src",lqx.lyqBox.album[e].link),t=jQuery(n),lqx.lyqBox.updateContent(a,e,lqx.lyqBox.album[e].type),lqx.lyqBox.addHash(),window.getComputedStyle(a[0]).opacity};break;case"video":var o=jQuery("<iframe></iframe>");o.attr("src",lqx.lyqBox.album[e].link),lqx.lyqBox.updateContent('<div class="video-container">'+o.prop("outerHTML")+"</div>",e,lqx.lyqBox.album[e].type),lqx.lyqBox.addHash();break;case"html":case"alert":""!==lqx.lyqBox.album[e].link&&void 0!==lqx.lyqBox.album[e].link?(t=lqx.lyqBox.loadHTML(lqx.lyqBox.album[e].link),t.done(function(t){""!==t&&lqx.lyqBox.updateContent(t,e,lqx.lyqBox.album[e].type)})):lqx.lyqBox.updateContent(lqx.lyqBox.album[e].html,e,lqx.lyqBox.album[e].type)}},updateContent:function(e,t,a){lqx.lyqBox.stopVideo(a),lqx.lyqBox.overlay.find(".content-wrapper").not(".active").addClass("active").find(".content").removeClass().addClass("content "+a).empty().append(e),lqx.lyqBox.containerActive.removeClass("active"),lqx.lyqBox.containerActive=lqx.lyqBox.overlay.find(".content-wrapper.active"),lqx.lyqBox.currentImageIndex=t,lqx.lyqBox.updateUIandKeyboard()},updateUIandKeyboard:function(){lqx.lyqBox.updateUI(),lqx.lyqBox.enableKeyboardNav()},updateUI:function(){"alert"!=lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].type?(lqx.lyqBox.overlay.find(".title").html(void 0!==lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].title&&""!==lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].title?lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].title:""),lqx.lyqBox.overlay.find(".caption").html(void 0!==lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].caption&&""!==lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].caption?lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].caption:""),lqx.lyqBox.overlay.find(".credit").html(void 0!==lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].credit&&""!==lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].credit?lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].credit:""),lqx.lyqBox.album.length>1?(lqx.lyqBox.overlay.find(".current").text(lqx.lyqBox.currentImageIndex+1),lqx.lyqBox.overlay.find(".total").text(lqx.lyqBox.album.length)):(lqx.lyqBox.overlay.find(".prev,.next").addClass("hide"),lqx.lyqBox.overlay.find(".counter").addClass("hide"))):(lqx.lyqBox.overlay.find(".prev,.next").addClass("hide"),lqx.lyqBox.overlay.find(".counter").addClass("hide"))},enableKeyboardNav:function(){jQuery(document).on("keyup.keyboard",jQuery.proxy(lqx.lyqBox.keyboardAction,lqx.lyqBox))},disableKeyboardNav:function(){jQuery(document).off(".keyboard")},swipeHandler:function(e,t){console.log(e,t),"lt"==t&&lqx.lyqBox.keyboardAction({keyCode:39}),"rt"==t&&lqx.lyqBox.keyboardAction({keyCode:37})},keyboardAction:function(e){var t=27,a=37,n=39,o=e.keyCode,r=String.fromCharCode(o).toLowerCase();o===t||r.match(/x|o|c/)?lqx.lyqBox.end():o===a?lqx.lyqBox.changeContent(0===lqx.lyqBox.currentImageIndex?lqx.lyqBox.album.length-1:lqx.lyqBox.currentImageIndex-1):o===n&&lqx.lyqBox.changeContent(lqx.lyqBox.currentImageIndex===lqx.lyqBox.album.length-1?0:lqx.lyqBox.currentImageIndex+1)},removeHash:function(){var e,t,a=window.location;"pushState"in history?history.pushState("",document.title,a.pathname+a.search):(e=document.body.scrollTop,t=document.body.scrollLeft,a.hash="",document.body.scrollTop=e,document.body.scrollLeft=t)},end:function(){lqx.lyqBox.disableKeyboardNav(),lqx.lyqBox.overlay.removeClass("open"),lqx.lyqBox.stopVideo(lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].type),lqx.lyqBox.removeHash()}},initUserActive:function(){lqx.vars.userActive={active:!0,timer:!1,throttle:!1,lastChangeTime:(new Date).getTime(),activeTime:0,inactiveTime:0},jQuery(window).on("orientationchange resize focusin",function(){lqx.userActive()}),jQuery(document).on("mousedown mousemove mouseup wheel keydown keypress keyup touchstart touchmove touchend",function(){lqx.userActive()}),jQuery(window).on("focusout",function(){lqx.userInactive()});var e=setInterval(function(){lqx.vars.userActive.activeTime+lqx.vars.userActive.inactiveTime<lqx.vars.userActive.maxTime?(lqx.vars.userActive.active?lqx.vars.userActive.activeTime+=(new Date).getTime()-lqx.vars.userActive.lastChangeTime:lqx.vars.userActive.inactiveTime+=(new Date).getTime()-lqx.vars.userActive.lastChangeTime,lqx.vars.userActive.lastChangeTime=(new Date).getTime()):clearInterval(e)},lqx.settings.userActive.refresh);lqx.userActive()},userActive:function(){lqx.vars.userActive.throttle||(lqx.vars.userActive.throttle=!0,setTimeout(function(){lqx.vars.userActive.throttle=!1},lqx.settings.userActive.throttle),lqx.vars.userActive.active||(lqx.vars.userActive.active=!0,lqx.vars.userActive.inactiveTime+=(new Date).getTime()-lqx.vars.userActive.lastChangeTime,lqx.vars.userActive.lastChangeTime=(new Date).getTime()),lqx.vars.userActive.active=!0,clearTimeout(lqx.vars.userActive.timer),lqx.vars.userActive.timer=setTimeout(function(){lqx.userInactive()},lqx.settings.userActive.idleTime))},userInactive:function(){lqx.vars.userActive.active=!1,clearTimeout(lqx.vars.userActive.timer),lqx.vars.userActive.activeTime+=(new Date).getTime()-lqx.vars.userActive.lastChangeTime,lqx.vars.userActive.lastChangeTime=(new Date).getTime()},gaReady:function(){jQuery.Deferred().done(function(){if(lqx.settings.ga.createParams&&"object"==typeof lqx.settings.ga.createParams){var e=lqx.settings.ga.createParams;Object.keys(e).forEach(function(t){"default"==t?ga("create",e[t].trackingId,e[t].cookieDomain,e[t].fieldsObject):ga("create",e[t].trackingId,e[t].cookieDomain,t,e[t].fieldsObject)})}},function(){var e;if(lqx.settings.ga.setParams&&"object"==typeof lqx.settings.ga.setParams&&(e=lqx.settings.ga.setParams,Object.keys(e).forEach(function(t){var a="set";"default"!=t&&(a=t+".set"),Object.keys(e[t]).forEach(function(n){ga(a,n,e[t][n])})})),lqx.settings.ga.requireParams&&"object"==typeof lqx.settings.ga.requireParams&&(e=lqx.settings.ga.requireParams,Object.keys(e).forEach(function(t){var a="require";"default"!=t&&(a=t+".require"),e[t].forEach(function(e){ga(a,e.pluginName,e.pluginOptions)})})),lqx.settings.ga.provideParams&&"object"==typeof lqx.settings.ga.provideParams&&(e=lqx.settings.ga.provideParams,Object.keys(e).forEach(function(t){var a="provide";"default"!=t&&(a=t+".provide"),e[t].forEach(function(e){ga(a,e.pluginName,e.pluginConstructor)})})),null!==lqx.settings.ga.abTestName&&null!==lqx.settings.ga.abTestNameDimension&&null!==lqx.settings.ga.abTestGroupDimension){var t=lqx.cookie("abTestGroup");null===t&&(t=Math.random()<.5?"A":"B",lqx.cookie("abTestGroup",t,{maxAge:2592e3,path:"/"})),jQuery("body").attr("data-abtest",t),ga("set","dimension"+lqx.settings.ga.abTestNameDimension,lqx.settings.ga.abTestName),ga("set","dimension"+lqx.settings.ga.abTestGroupDimension,t)}},function(){if("function"==typeof lqx.settings.ga.customParamsFuncs)try{lqx.settings.ga.customParamsFuncs()}catch(e){console.log(e)}},function(){ga("send","pageview"),lqx.initTracking()}).resolve()},parseURLParams:function(){lqx.vars.urlParams={};var e=window.location.search.substr(1).split("&");e.length&&e.forEach(function(e){e=e.split("=",2),lqx.vars.urlParams[e[0]]=2==e.length?decodeURIComponent(e[1].replace(/\+/g," ")):null})},comicfyFonts:function(){if("comicfy"in lqx.vars.urlParams){var e=document.createElement("link");e.href=lqx.vars.tmplURL+"/fonts/comicneue/comicfy.css",e.type="text/css",e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e)}},almost7Fonts:function(){if("almost7"in lqx.vars.urlParams){var e=document.createElement("link");e.href=lqx.vars.tmplURL+"/fonts/still-6-but-almost-7/still-6-but-almost-7.css",e.type="text/css",e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e)}},detectSwipe:function(e,t){var a={sX:0,sY:0,eX:0,eY:0,dir:"",opts:lqx.settings.detectSwipe};elem=jQuery(e),elem.on("touchstart",function(e){var t=e.originalEvent.touches[0];
a.sX=t.clientX,a.sY=t.clientY}),elem.on("touchmove",function(e){e.preventDefault();var t=e.originalEvent.touches[0];a.eX=t.clientX,a.eY=t.clientY}),elem.on("touchend",function(){Math.abs(a.eX-a.sX)>a.opts.minX&&Math.abs(a.eY-a.sY)<a.opts.maxY&&a.eX>0?a.dir=a.eX>a.sX?"rt":"lt":Math.abs(a.eY-a.sY)>a.opts.minY&&Math.abs(a.eX-a.sX)<a.opts.maxX&&a.eY>0&&(a.dir=a.eY>a.sY?"dn":"up"),a.dir&&"function"==typeof t&&t(e,a.dir),a.dir="",a.sX=0,a.sY=0,a.eX=0,a.eY=0})},uniqueFormURL:function(){if(lqx.settings.uniqueFormURL.enable){var e=jQuery(lqx.settings.uniqueFormURL.selector);if(e.length){var t=new Date,a=(1e3*t.getTime()+t.getMilliseconds()).toString(32)+parseInt(1e7*Math.random()).toString(32);e.each(function(){var e=jQuery(this).attr("action");e.length&&jQuery(this).attr("action",e+(-1!==e.indexOf("?")?"&":"?")+a)})}}},init:function(){return jQuery(document).ready(function(){lqx.bodyScreenSize(),lqx.bodyScreenOrientation(),lqx.geoLocate(),lqx.initImgLoadAttr(),lqx.browserFixes(),lqx.initLogging(),lqx.initMobileMenu(),lqx.initEqualHeightRows(),lqx.imageCaption(),lqx.lineBreakSymbol(),lqx.initMutationObserver(),lqx.lyqBox.init(),lqx.initUserActive(),lqx.parseURLParams(),lqx.uniqueFormURL()}),jQuery(window).load(function(){lqx.bodyScreenSize(),lqx.hangingPunctuation(),lqx.equalHeightRows(),lqx.comicfyFonts(),lqx.almost7Fonts()}),jQuery(window).scroll(function(){lqx.vars.scrollThrottle||(jQuery(document).trigger("scrollthrottle"),lqx.vars.scrollThrottle=!0,setTimeout(function(){jQuery(document).trigger("scrollthrottle"),lqx.vars.scrollThrottle=!1},lqx.settings.scrollThrottle.duration))}),jQuery(window).resize(function(){lqx.vars.resizeThrottle||(jQuery(document).trigger("resizethrottle"),lqx.vars.resizeThrottle=!0,setTimeout(function(){jQuery(document).trigger("resizethrottle"),lqx.vars.resizeThrottle=!1},lqx.settings.resizeThrottle.duration))}),jQuery(window).on("orientationchange",function(){lqx.bodyScreenSize(),lqx.bodyScreenOrientation()}),jQuery(window).on("screensizechange",function(){lqx.equalHeightRows(),lqx.hangingPunctuation(),lqx.resetMobileMenus()}),jQuery(window).on("scrollthrottle",function(){}),jQuery(window).on("resizethrottle",function(){lqx.bodyScreenSize()}),window.onYouTubeIframeAPIReady=function(){lqx.vars.youTubeIframeAPIReady&&"undefined"!=typeof YT&&YT&&YT.Player?lqx.vars.youtubePlayers.forEach(function(e){void 0===lqx.vars.youtubePlayers[e].playerObj&&(lqx.vars.youtubePlayers[e].playerObj=new YT.Player(e,{events:{onReady:function(t){lqx.youtubePlayerReady(t,e)},onStateChange:function(t){lqx.youtubePlayerStateChange(t,e)}}}))}):(lqx.vars.youTubeIframeAPIReadyAttempts++,lqx.vars.youTubeIframeAPIReadyAttempts<120&&setTimeout(function(){onYouTubeIframeAPIReady()},250))},!0}()};