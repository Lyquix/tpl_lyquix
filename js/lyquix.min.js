var lqx=lqx||{settings:{logger:{enable:false,namespaces:["window","jQuery","lqx"]},tracking:{downloads:true,outbound:true,scrolldepth:true,photogallery:true,video:true},shadeColorPercent:{lighter:20,light:10,dark:-10,darker:-20},resizeThrottle:{duration:13},bodyScreenSize:{min:0,max:4,breakPoints:[320,640,960,1280,1600]}},vars:{resizeThrottle:false,bodyScreenSize:{sizes:["xs","sm","md","lg","xl"]}},setOptions:function(opts){if(typeof opts=="object"){jQuery.extend(true,lqx.settings,opts)}return lqx.settings},initLogging:function(){if(lqx.settings.logger.enable){for(var i in lqx.settings.logger.namespaces){lqx.addLoggingToNamespace(lqx.settings.logger.namespaces[i])}}},addLoggingToNamespace:function(nameSpace){if(nameSpace=="window"){namespaceObject=window}else{namespaceObject=window[nameSpace]}for(var name in namespaceObject){var potentialFunction=namespaceObject[name];if(Object.prototype.toString.call(potentialFunction)==="[object Function]"){namespaceObject[name]=lqx.getLoggableFunction(potentialFunction,name,nameSpace)}}},getLoggableFunction:function(func,name,nameSpace){return function(){console.log("LOG: executing "+nameSpace+"."+name+" with arguments:");console.log(arguments);return func.apply(this,arguments)}},bodyScreenSize:function(){var w=jQuery(window).width();if(w<lqx.settings.bodyScreenSize.breakPoints[1])s=0;if(w>=lqx.settings.bodyScreenSize.breakPoints[1])s=1;if(w>=lqx.settings.bodyScreenSize.breakPoints[2])s=2;if(w>=lqx.settings.bodyScreenSize.breakPoints[3])s=3;if(w>=lqx.settings.bodyScreenSize.breakPoints[4])s=4;if(lqx.vars.bodyScreenSize.sizes[s]!=lqx.vars.lastScreenSize){if(s<lqx.settings.bodyScreenSize.min)s=lqx.settings.bodyScreenSize.min;if(s>lqx.settings.bodyScreenSize.max)s=lqx.settings.bodyScreenSize.max;jQuery("body").attr("screen",lqx.vars.bodyScreenSize.sizes[s]);document.getElementsByTagName("body")[0].className=document.getElementsByTagName("body")[0].className;jQuery(document).trigger("screensizechange");lqx.vars.lastScreenSize=lqx.vars.bodyScreenSize.sizes[s]}},mobileDetect:function(){var md=new MobileDetect(window.navigator.userAgent);var r={mobile:false,phone:false,tablet:false};if(md.mobile()!=null){r.mobile=true;jQuery("body").addClass("mobile");if(md.phone()!=null){r.phone=true;jQuery("body").addClass("phone")}if(md.tablet()!=null){r.tablet=true;jQuery("body").addClass("tablet")}}return r},getBrowser:function(){var ua=navigator.userAgent,tem,M=ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(M[1])){tem=/\brv[ :]+(\d+)/g.exec(ua)||[];return"IE "+(tem[1]||"")}if(M[1]==="Chrome"){tem=ua.match(/\b(OPR|Edge)\/(\d+)/);if(tem!=null){return tem.slice(1).join(" ").replace("OPR","Opera")}}M=M[2]?[M[1],M[2]]:[navigator.appName,navigator.appVersion,"-?"];if((tem=ua.match(/version\/(\d+)/i))!=null){M.splice(1,1,tem[1])}return M.join(" ")},browserFixes:function(){switch(lqx.getBrowser){case"MSIE 10":case"MSIE 11":case"IE 10":case"IE 11":jQuery("html").css("font-feature-settings","normal");break}},equalHeightRows:function(){var currentTallest=0,currentRowStart=0,rowDivs=new Array,el,topPosition=0,loadComplete=true;jQuery(".equalheightrow").each(function(){el=jQuery(this);jQuery(el).find("img").each(function(){if(this.complete!=true||this.naturalWidth==0){if(typeof jQuery(this).attr("error")=="undefined"){loadComplete=false}}}).promise().done(function(){if(loadComplete){el.height("auto");topPostion=el.position().top;if(currentRowStart!=topPostion){for(currentDiv=0;currentDiv<rowDivs.length;currentDiv++){rowDivs[currentDiv].height(currentTallest)}rowDivs.length=0;currentRowStart=topPostion;currentTallest=el.height();rowDivs.push(el)}else{rowDivs.push(el);currentTallest=currentTallest<el.height()?el.height():currentTallest}for(currentDiv=0;currentDiv<rowDivs.length;currentDiv++){rowDivs[currentDiv].height(currentTallest)}}})}).promise().done(function(){if(!loadComplete){setTimeout(function(){lqx.equalHeightRows()},250)}})},hangingPunctuation:function(){lqx.vars.hangingMarks={"“":"medium","‘":"small",'"':"medium","'":"small","«":"large","‹":"medium","„":"medium","‚":"small"};jQuery(".hanging-punctuation").find("p").each(function(idx,elem){lqx.hangPunctuation(elem)})},hangPunctuation:function(elem){var plaintext=elem.innerText||elem.textContent;for(var mark in lqx.vars.hangingMarks){if(plaintext.indexOf(mark)===0){jQuery(elem).append('<span id="hangingMark">'+mark+"</span>");var w=jQuery("#hangingMark").outerWidth();jQuery(elem).css("text-indent","-"+w+"px");jQuery("#hangingMark").remove()}}},imageCaption:function(){jQuery(".image.caption img").each(function(idx,elem){var caption=jQuery(elem).attr("alt");if(caption){jQuery(elem).after('<div class="caption">'+caption+"</div>")}})},lineBreakSymbol:function(){jQuery(".show-line-break p br").each(function(idx,elem){jQuery(elem).before(String.fromCharCode(8626))})},shadeColor:function(){for(var i in["color","bg","border"]){for(var j in["lighter","light","dark","darker"]){var prop;switch(i){case"color":prop="color";break;case"bg":prop="background-color";break;case"border":prop="border-color";break}var c="."+i+"-"+j;jQuery(c).each(function(idx,elem){var color=jQuery(elem).css(prop);if(color.charAt(0)=="#"){color=shadeHex(color,lqx.settings.shadeColorPercent[j])}else{color=shadeRGB(color,lqx.settings.shadeColorPercent[j])}jQuery(elem).css(prop,color)})}}},shadeHex:function(color,percent){var num=parseInt(color.slice(1),16),amt=Math.round(2.55*percent),R=(num>>16)+amt,G=(num>>8&255)+amt,B=(num&255)+amt;return"#"+(16777216+(R<255?R<1?0:R:255)*65536+(G<255?G<1?0:G:255)*256+(B<255?B<1?0:B:255)).toString(16).slice(1)},shadeRGB:function(color,percent){var f=color.split(","),t=percent<0?0:255,p=percent<0?percent*-1:percent,R=parseInt(f[0].slice(4)),G=parseInt(f[1]),B=parseInt(f[2]);return"rgb("+(Math.round((t-R)*p)+R)+","+(Math.round((t-G)*p)+G)+","+(Math.round((t-B)*p)+B)+")"},initTracking:function(){if(typeof window.ga!=="undefined"){if(lqx.settings.tracking.outbound||lqx.settings.tracking.download){jQuery("a").each(function(){var elem=this;if(elem.href){if(elem.href.indexOf(location.host)==-1&&lqx.settings.tracking.outbound){jQuery(elem).click(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var url=elem.href;var target=elem.target&&!elem.target.match(/^_(self|parent|top)$/i)?elem.target:false;ga("send",{hitType:"event",eventCategory:"Outbound Links",eventAction:"click",eventLabel:url,nonInteraction:true,hitCallback:function(){target?window.open(url,target):window.location.href=url}})})}else if(elem.href.match(/\.(gif|png|jpg|jpeg|tif|tiff|svg|webp|bmp|zip|rar|gzip|7z|tar|exe|msi|dmg|txt|pdf|rtf|doc|docx|dot|dotx|xls|xlsx|xlt|xltx|ppt|pptx|pot|potx|mp3|wav|mp4|ogg|webm|wma|mov|avi|wmv|flv|swf|xml|js|json|css|less|sass)$/i)&&lqx.settings.tracking.download){jQuery(elem).click(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var url=elem.href;var target=elem.target&&!elem.target.match(/^_(self|parent|top)$/i)?elem.target:false;var loc=elem.protocol+"//"+elem.hostname+elem.pathname+elem.search;var page=elem.pathname+elem.search;ga("send",{hitType:"pageview",location:loc,page:page,title:"Download: "+page,hitCallback:function(){target?window.open(url,target):window.location.href=url}})})}}})}if(lqx.settings.tracking.scrolldepth){lqx.vars.scrollDepthMax=Math.ceil((jQuery(window).scrollTop()+jQuery(window).height())/jQuery(document).height()*10)*10;jQuery(window).scroll(function(){if(lqx.vars.scrollDepthMax<100){lqx.vars.scrollDepthMax=Math.max(lqx.vars.scrollDepthMax,Math.ceil((jQuery(window).scrollTop()+jQuery(window).height())/jQuery(document).height()*10)*10)}});jQuery(window).on("unload",function(){ga("send",{hitType:"event",eventCategory:"Scroll Depth",eventAction:lqx.vars.scrollDepthMax,nonInteraction:true})})}if(lqx.settings.tracking.photogallery){jQuery("a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]").click(function(){ga("send",{hitType:"event",eventCategory:"Photo Gallery",eventAction:"Open"})});jQuery("img.lb-image").on("load",function(){ga("send",{hitType:"event",eventCategory:"Photo Gallery",eventAction:"Display",eventLabel:jQuery(this).attr("src")})})}if(lqx.settings.tracking.video){lqx.vars.youtubePlayers={};lqx.vars.vimeoPlayers={};jQuery("iframe").each(function(idx,elem){if(typeof jQuery(elem).attr("src")!="undefined"){if(jQuery(elem).attr("src").indexOf("youtube.com/embed/")!=-1){if(jQuery(this).attr("src").indexOf("enablejsapi=1")==-1){var urlconn="&";if(jQuery(this).attr("src").indexOf("?")==-1){urlconn="?"}jQuery(elem).attr("src",jQuery(elem).attr("src")+urlconn+"enablejsapi=1&version=3")}if(typeof jQuery(elem).attr("id")=="undefined"){jQuery(elem).attr("id","youtubePlayer"+idx)}lqx.vars.youtubePlayers[jQuery(elem).attr("id")]={}}if(jQuery(elem).attr("src").indexOf("player.vimeo.com/video/")!=-1){if(jQuery(this).attr("src").indexOf("api=1")==-1){if(jQuery(this).attr("src").indexOf("?")==-1){urlconn="?"}jQuery(elem).attr("src",jQuery(elem).attr("src")+urlconn+"api=1&player_id=vimeoPlayer"+idx)}if(typeof jQuery(elem).attr("id")=="undefined"){jQuery(elem).attr("id","vimeoPlayer"+idx)}lqx.vars.vimeoPlayers[jQuery(elem).attr("id")]={}}}}).promise().done(function(){if(Object.keys(lqx.vars.youtubePlayers).length>0){var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}if(Object.keys(lqx.vars.vimeoPlayers).length>0){if(window.addEventListener){window.addEventListener("message",lqx.vimeoReceiveMessage,false)}else{window.attachEvent("onmessage",lqx.vimeoReceiveMessage,false)}}})}}},youtubePlayerCallback:function(e,playerId){player=lqx.vars.youtubePlayers[playerId];videoTitle=e.target.B.videoData.title;videoUrl=e.target.B.videoUrl;duration=e.target.getDuration();currentTime=e.target.getCurrentTime();if(e.data==null){player.progress=0;player.start=false;player.complete=false}else{var label;if(e.target.getPlayerState()==0&&!player.complete){label="Complete";player.complete=true}if(e.target.getPlayerState()==1){player.timer=setTimeout(function(){lqx.youtubePlayerCallback(e,playerId)},250);if(!player.start){label="Start";player.start=true}else{if(Math.ceil(Math.ceil(currentTime/duration*100)/10)-1>player.progress){player.progress=Math.ceil(Math.ceil(currentTime/duration*100)/10)-1;if(player.progress!=10){label=player.progress*10+"%"}else{clearTimeout(lqx.vars.youtubePlayers[playerId].timer)}}}}if(label){lqx.videoTrackingEvent(playerId,label,videoTitle)}}},vimeoReceiveMessage:function(e){if(/^https?:\/\/player.vimeo.com/.test(e.origin)){var data=JSON.parse(e.data);player=lqx.vars.vimeoPlayers[data.player_id];var label;switch(data.event){case"ready":player.progress=0;player.start=false;player.complete=false;lqx.vimeoSendMessage(data.player_id,e.origin,"addEventListener","play");lqx.vimeoSendMessage(data.player_id,e.origin,"addEventListener","finish");lqx.vimeoSendMessage(data.player_id,e.origin,"addEventListener","playProgress");break;case"play":if(!player.start){label="Start";player.start=true}break;case"playProgress":if(Math.ceil(Math.ceil(data.data.percent*100)/10)-1>player.progress){player.progress=Math.ceil(Math.ceil(data.data.percent*100)/10)-1;if(player.progress!=10){label=player.progress*10+"%"}}break;case"finish":if(!player.complete){label="Complete";player.complete=true}}if(label){lqx.videoTrackingEvent(data.player_id,label,"Title not available")}}},vimeoSendMessage:function(playerId,origin,action,value){var data={method:action};if(value){data.value=value}document.getElementById(playerId).contentWindow.postMessage(JSON.stringify(data),origin)},videoTrackingEvent:function(playerId,label,title){console.log(playerId+":"+label);ga("send",{hitType:"event",eventCategory:"Video",eventAction:"Play",eventLabel:label,eventValue:title+" ("+jQuery("#"+playerId).attr("src").split("?")[0]+")"})},ieImgSizeFix:function(){if(lqx.getBrowser.indexOf("IE ")!=-1){jQuery("img").each(function(){if(jQuery(this).attr("width")==undefined){jQuery(this).attr("width","100%")}})}},ie8SVGFallback:function(){if(lqx.getBrowser.indexOf("IE 8")!=-1){jQuery("img").each(function(){src=jQuery(this).attr("src");if(/\.svg$/i.test(src)){jQuery(this).attr("src",src.replace(".svg",".png"))}})}},mobileMenu:function(elem){var li=jQuery(elem).parent();var url=elem.href;var target=elem.target&&!elem.target.match(/^_(self|parent|top)$/i)?elem.target:false;var go=function(){target?window.open(url,target):window.location.href=url};if(jQuery(li).hasClass("deeper")){if(jQuery(li).hasClass("open")){go()}else{jQuery(li).siblings("li.open").find("li.open").removeClass("open");jQuery(li).siblings("li.open").removeClass("open");jQuery(li).addClass("open")}}else{go()}}};jQuery(document).ready(function(){lqx.getBrowser=lqx.getBrowser();lqx.browserFixes();lqx.initLogging();lqx.initTracking();lqx.equalHeightRows();lqx.imageCaption();lqx.lineBreakSymbol();lqx.ieImgSizeFix();lqx.ie8SVGFallback();jQuery(window).resize(function(){if(!lqx.vars.resizeThrottle){lqx.bodyScreenSize();lqx.vars.resizeThrottle=true;setTimeout(function(){lqx.vars.resizeThrottle=false;lqx.bodyScreenSize()},lqx.settings.resizeThrottle.duration)}});jQuery(window).on("orientationchange",function(){lqx.bodyScreenSize()});jQuery(window).on("screensizechange",function(){lqx.equalHeightRows();lqx.hangingPunctuation()});jQuery("body.mobile .horizontal, body.mobile .vertical, body.mobile .slide-out").on("click","ul.menu a",function(e){e.preventDefault();lqx.mobileMenu(this)});jQuery("body.mobile .horizontal, body.mobile .vertical, .slide-out").click(function(e){e.stopPropagation()});jQuery(".slide-out .menu-control").click(function(){var elem=jQuery(this).parent();if(jQuery(elem).hasClass("open")){jQuery(elem).removeClass("open")}else{jQuery(elem).addClass("open")}});jQuery("body").click(function(){jQuery("body.mobile .horizontal, body.mobile .vertical, body.mobile .slide-out").find("ul.menu li.open").removeClass("open");jQuery(".slide-out.open").removeClass("open")})});jQuery(window).load(function(){lqx.hangingPunctuation()});function onYouTubeIframeAPIReady(){for(var playerId in lqx.vars.youtubePlayers){lqx.vars.youtubePlayers[playerId].playerObj=new YT.Player(playerId,{events:{onReady:function(e){lqx.youtubePlayerCallback(e,playerId)},onStateChange:function(e){lqx.youtubePlayerCallback(e,playerId)}}})}}