var lqx=lqx||{settings:{debug:false,logger:{enable:false,namespaces:["window","jQuery","lqx"]},tracking:{downloads:true,outbound:true,scrolldepth:true,photogallery:true,video:true,activetime:true},shadeColorPercent:{lighter:20,light:10,dark:-10,darker:-20},resizeThrottle:{duration:15},scrollThrottle:{duration:15},bodyScreenSize:{min:0,max:4,breakPoints:[320,640,960,1280,1600],sizes:["xs","sm","md","lg","xl"]},equalHeightRows:{refreshElems:false,onlyVisible:true,checkPageLoad:true},lyqBox:{lyqboxHTMLContent:'<div class="lyqbox">'+'<div class="content-wrapper">'+'<div class="content"></div>'+'<div class="info">'+'<div class="title"></div>'+'<div class="caption"></div>'+'<div class="credit"></div>'+"</div>"+"</div>"+'<div class="content-wrapper">'+'<div class="content"></div>'+'<div class="info">'+'<div class="title"></div>'+'<div class="caption"></div>'+'<div class="credit"></div>'+"</div>"+"</div>"+'<div class="close"></div>'+'<div class="prev"></div>'+'<div class="next"></div>'+'<div class="counter">'+'<span class="current"></span>'+' of <span class="total"></span>'+"</div>"+"</div>"},userActive:{idleTime:5e3,throttle:100,refresh:250},ga:{createParams:null,setParams:null,requireParams:null,provideParams:null,customParamsFuncs:null},geoLocation:{enable:false,gps:false}},vars:{resizeThrottle:false,scrollThrottle:false,youTubeIframeAPIReady:false,youTubeIframeAPIReadyAttempts:0},setOptions:function(opts){if(typeof opts=="object"){jQuery.extend(true,lqx.settings,opts)}return lqx.settings},log:function(){if(lqx.settings.debug)console.log(arguments)},initLogging:function(){if(lqx.settings.logger.enable){lqx.settings.logger.namespaces.forEach(function(namespace){lqx.addLoggingToNamespace(namespace)})}},addLoggingToNamespace:function(nameSpace){if(nameSpace=="window"){namespaceObject=window}else{namespaceObject=window[nameSpace]}Object.keys(namespaceObject).forEach(function(potentialFunction,name){if(Object.prototype.toString.call(potentialFunction)==="[object Function]"){namespaceObject[name]=lqx.getLoggableFunction(potentialFunction,name,nameSpace)}})},getLoggableFunction:function(func,name,nameSpace){return function(){console.log("LOG: executing "+nameSpace+"."+name+" with arguments:");console.log(arguments);return func.apply(this,arguments)}},bodyScreenSize:function(){var w=jQuery(window).width();if(w<lqx.settings.bodyScreenSize.breakPoints[1])s=0;if(w>=lqx.settings.bodyScreenSize.breakPoints[1])s=1;if(w>=lqx.settings.bodyScreenSize.breakPoints[2])s=2;if(w>=lqx.settings.bodyScreenSize.breakPoints[3])s=3;if(w>=lqx.settings.bodyScreenSize.breakPoints[4])s=4;if(s<lqx.settings.bodyScreenSize.min)s=lqx.settings.bodyScreenSize.min;if(s>lqx.settings.bodyScreenSize.max)s=lqx.settings.bodyScreenSize.max;if(lqx.settings.bodyScreenSize.sizes[s]!=lqx.vars.lastScreenSize){jQuery("body").attr("screen",lqx.settings.bodyScreenSize.sizes[s]);lqx.vars.lastScreenSize=lqx.settings.bodyScreenSize.sizes[s];jQuery(document).trigger("screensizechange")}},bodyScreenOrientation:function(){if("orientation"in window.screen){switch(window.screen.orientation.type){case"portrait-primary":case"portrait-secondary":lqx.vars.lastScreenOrientation="portrait";jQuery("body").attr("orientation","portrait");break;case"landscape-primary":case"landscape-secondary":lqx.vars.lastScreenOrientation="landscape";jQuery("body").attr("orientation","landscape");break}}},geoLocate:function(){if(lqx.settings.geoLocation.enable){jQuery.ajax({cache:false,complete:function(xhr,status){if(lqx.settings.geoLocation.gps&&"geolocation"in navigator){navigator.geolocation.getCurrentPosition(function(position){lqx.vars.geoLocation.lat=position.coords.latitude;lqx.vars.geoLocation.lon=position.coords.longitude;lqx.vars.geoLocation.radius=0})}if(lqx.vars.geoLocation.city)jQuery("body").attr("city",lqx.vars.geoLocation.city);if(lqx.vars.geoLocation.subdivision)jQuery("body").attr("subdivision",lqx.vars.geoLocation.subdivision);if(lqx.vars.geoLocation.country)jQuery("body").attr("country",lqx.vars.geoLocation.country);if(lqx.vars.geoLocation.continent)jQuery("body").attr("continent",lqx.vars.geoLocation.continent);if(lqx.vars.geoLocation.time_zone)jQuery("body").attr("time-zone",lqx.vars.geoLocation.time_zone)},dataType:"json",error:function(){lqx.vars.geoLocation={city:null,subdivision:null,country:null,continent:null,time_zone:null,lat:null,lon:null,radius:null}},success:function(data,status,xhr){lqx.vars.geoLocation=data},url:lqx.vars.tmplURL+"/php/ip2geo/"})}},mobileDetect:function(){var md=new MobileDetect(window.navigator.userAgent);var r={mobile:false,phone:false,tablet:false};if(md.mobile()!=null){r.mobile=true;jQuery("body").addClass("mobile");if(md.phone()!=null){r.phone=true;jQuery("body").addClass("phone")}if(md.tablet()!=null){r.tablet=true;jQuery("body").addClass("tablet")}}return r},getBrowser:function(){var ua=navigator.userAgent,browser;function getFirstMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[1]||""}function getSecondMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[2]||""}if(/opera|opr/i.test(ua)){browser={name:"Opera",type:"opera",version:getFirstMatch(/version\/(\d+(\.\d+)?)/i)||getFirstMatch(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}}else if(/msie|trident/i.test(ua)){browser={name:"Internet Explorer",type:"msie",version:getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)}}else if(/chrome.+? edge/i.test(ua)){browser={name:"Microsft Edge",type:"msedge",version:getFirstMatch(/edge\/(\d+(\.\d+)?)/i)}}else if(/chrome|crios|crmo/i.test(ua)){browser={name:"Google Chrome",type:"chrome",version:getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else if(/firefox/i.test(ua)){browser={name:"Firefox",type:"firefox",version:getFirstMatch(/(?:firefox)[ \/](\d+(\.\d+)?)/i)}}else if(!/like android/i.test(ua)&&/android/i.test(ua)){browser={name:"Android",type:"android",version:getFirstMatch(/version\/(\d+(\.\d+)?)/i)}}else if(/safari/i.test(ua)){browser={name:"Safari",type:"safari",version:getFirstMatch(/version\/(\d+(\.\d+)?)/i)}}else{browser={name:getFirstMatch(/^(.*)\/(.*) /),version:getSecondMatch(/^(.*)\/(.*) /)};browser.type=browser.name.toLowerCase().replace(/\s/g,"")}jQuery("body").addClass(browser.type);jQuery("body").addClass(browser.type+"-"+browser.version.split(".")[0]);jQuery("body").addClass(browser.type+"-"+browser.version.replace(/\./g,"-"));return browser}(),getOS:function(){var ua=navigator.userAgent,os;function getFirstMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[1]||""}function getSecondMatch(regex){var match=ua.match(regex);return match&&match.length>1&&match[2]||""}if(/(ipod|iphone|ipad)/i.test(ua)){os={name:"iOS",type:"ios",version:getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i).replace(/[_\s]/g,".")}}else if(/windows phone/i.test(ua)){os={name:"Windows Phone",type:"windowsphone",version:getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i)}}else if(!/like android/i.test(ua)&&/android/i.test(ua)){os={name:"Android",type:"android",version:getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i)}}else if(/windows nt/i.test(ua)){os={name:"Windows",type:"windows",version:getFirstMatch(/windows nt (\d+(\.\d+)*)/i)}}else if(/mac os x/i.test(ua)){os={name:"Mac OS X",type:"macosx",version:getFirstMatch(/mac os x (\d+([_\s]\d+)*)/i).replace(/[_\s]/g,".")}}else if(/ubuntu/i.test(ua)){os={name:"Ubuntu",type:"ubuntu",version:getFirstMatch(/ubuntu\/(\d+(\.\d+)*)/i)}}else if(/fedora/i.test(ua)){os={name:"Fedora",type:"fedora",version:getFirstMatch(/fedora\/(\d+(\.\d+)*)/i)}}else if(/CrOS/.test(ua)){os={name:"Chrome OS",type:"chromeos",version:getSecondMatch(/cros (.+) (\d+(\.\d+)*)/i)}}if(os.type&&os.version){jQuery("body").addClass(os.type);jQuery("body").addClass(os.type+"-"+os.version.split(".")[0]);jQuery("body").addClass(os.type+"-"+os.version.replace(/\./g,"-"))}return os}(),browserFixes:function(){if(lqx.getBrowser.type=="msie"){jQuery("img").each(function(){var img=jQuery(this);if(img.attr("width")==undefined){var newimg=new Image;newimg.onload=function(){img.attr("width",newimg.width)};newimg.src=img.attr("src")}});if(lqx.getBrowser.version>=10){jQuery("html").css("font-feature-settings","normal")}if(lqx.getBrowser.version<=8){jQuery("img").each(function(){src=jQuery(this).attr("src");if(/\.svg$/i.test(src)){jQuery(this).attr("src",src.replace(".svg",".png"))}})}}},initEqualHeightRows:function(){if(lqx.settings.equalHeightRows.onlyVisible){lqx.vars.equalHeightRowElems=jQuery(".equalheightrow:visible")}else{lqx.vars.equalHeightRowElems=jQuery(".equalheightrow")}lqx.vars.equalHeightRowImgs=lqx.vars.equalHeightRowElems.find("img");lqx.vars.equalHeightRowPageLoaded=false;jQuery(window).load(function(){lqx.vars.equalHeightRowPageLoaded=true});lqx.equalHeightRows()},equalHeightRows:function(opts){var s=lqx.settings.equalHeightRows;if(typeof opts=="object")jQuery.extend(true,s,opts);if(s.refreshElems||typeof lqx.vars.equalHeightRowElems=="undefined"){if(lqx.settings.equalHeightRows.onlyVisible){lqx.vars.equalHeightRowElems=jQuery(".equalheightrow:visible")}else{lqx.vars.equalHeightRowElems=jQuery(".equalheightrow")}lqx.vars.equalHeightRowImgs=lqx.vars.equalHeightRowElems.find("img")}var elemsCount=lqx.vars.equalHeightRowElems.length;lqx.vars.equalHeightRowElems.height("auto").promise().done(function(){var currElem,currElemTop=0,currElemHeight=0,currRowElems=new Array,currRowTop=0,currRowHeight=0;lqx.vars.equalHeightRowElems.each(function(i){currElem=jQuery(this);currElemTop=currElem.offset().top;currElemHeight=currElem.height();if(currElemTop!=currRowTop){if(currRowElems.length>1){for(var j=0;j<currRowElems.length;j++){currRowElems[j].height(currRowHeight)}}currRowElems=new Array(currElem);currRowTop=currElem.offset().top;currRowHeight=currElemHeight}else{currRowElems.push(currElem);currRowHeight=currElemHeight>currRowHeight?currElemHeight:currRowHeight;if(i==elemsCount-1){if(currRowElems.length>1){for(var j=0;j<currRowElems.length;j++){currRowElems[j].height(currRowHeight)}}}}}).promise().done(function(){if(!(lqx.settings.equalHeightRows.checkPageLoad&&lqx.vars.equalHeightRowPageLoaded)){lqx.vars.equalHeightRowImgs.each(function(){if(this.complete!=true||typeof this.naturalWidth!=="undefined"&&this.naturalWidth===0){if(typeof jQuery(this).attr("loaderror")!="undefined"){setTimeout(function(){lqx.equalHeightRows(opts)},250)}}})}})})},hangingPunctuation:function(){lqx.vars.hangingMarks={"“":"medium","‘":"small",'"':"medium","'":"small","«":"large","‹":"medium","„":"medium","‚":"small"};jQuery(".hanging-punctuation").find("p").each(function(idx,elem){lqx.hangPunctuation(elem)})},hangPunctuation:function(elem){var plaintext=elem.innerText||elem.textContent;for(var mark in lqx.vars.hangingMarks){if(plaintext.indexOf(mark)===0){jQuery(elem).append('<span id="hangingMark">'+mark+"</span>");var w=jQuery("#hangingMark").outerWidth();jQuery(elem).css("text-indent","-"+w+"px");jQuery("#hangingMark").remove()}}},imageCaption:function(){jQuery(".image.caption img").each(function(idx,elem){var caption=jQuery(elem).attr("alt");if(caption){jQuery(elem).after('<div class="caption">'+caption+"</div>")}})},lineBreakSymbol:function(){jQuery(".show-line-break p br").each(function(idx,elem){jQuery(elem).before(String.fromCharCode(8626))})},shadeColor:function(){for(var i in["color","bg","border"]){for(var j in["lighter","light","dark","darker"]){var prop;switch(i){case"color":prop="color";break;case"bg":prop="background-color";break;case"border":prop="border-color";break}var c="."+i+"-"+j;jQuery(c).each(function(idx,elem){var color=jQuery(elem).css(prop);if(color.charAt(0)=="#"){color=shadeHex(color,lqx.settings.shadeColorPercent[j])}else{color=shadeRGB(color,lqx.settings.shadeColorPercent[j])}jQuery(elem).css(prop,color)})}}},shadeHex:function(color,percent){var num=parseInt(color.slice(1),16),amt=Math.round(2.55*percent),R=(num>>16)+amt,G=(num>>8&255)+amt,B=(num&255)+amt;return"#"+(16777216+(R<255?R<1?0:R:255)*65536+(G<255?G<1?0:G:255)*256+(B<255?B<1?0:B:255)).toString(16).slice(1)},shadeRGB:function(color,percent){var f=color.split(","),t=percent<0?0:255,p=percent<0?percent*-1:percent,R=parseInt(f[0].slice(4)),G=parseInt(f[1]),B=parseInt(f[2]);return"rgb("+(Math.round((t-R)*p)+R)+","+(Math.round((t-G)*p)+G)+","+(Math.round((t-B)*p)+B)+")"},initTracking:function(){if(lqx.settings.tracking.outbound||lqx.settings.tracking.download){jQuery("a").each(function(){var elem=this;if(elem.href){if(typeof jQuery(this).attr("data-featherlight")==="undefined"&&typeof jQuery(this).parent().attr("data-featherlight-gallery")==="undefined"){if(elem.href.indexOf(location.host)==-1&&lqx.settings.tracking.outbound){jQuery(elem).click(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var url=elem.href;var label=url;if(jQuery(elem).attr("title")){label=jQuery(elem).attr("title")+" ["+url+"]"}ga("send",{hitType:"event",eventCategory:"Outbound Links",eventAction:"click",eventLabel:label,nonInteraction:true,hitCallback:function(){window.location.href=url}})})}else if(elem.href.match(/\.(gif|png|jpg|jpeg|tif|tiff|svg|webp|bmp|zip|rar|gzip|7z|tar|exe|msi|dmg|txt|pdf|rtf|doc|docx|dot|dotx|xls|xlsx|xlt|xltx|ppt|pptx|pot|potx|mp3|wav|mp4|ogg|webm|wma|mov|avi|wmv|flv|swf|xml|js|json|css|less|sass)$/i)&&lqx.settings.tracking.downloads){jQuery(elem).click(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var url=elem.href;var loc=elem.protocol+"//"+elem.hostname+elem.pathname+elem.search;var page=elem.pathname+elem.search;var title="Download: "+page;if(jQuery(elem).attr("title")){title=jQuery(elem).attr("title")}ga("send",{hitType:"pageview",location:loc,page:page,title:title,hitCallback:function(){window.location.href=url}})})}}}})}if(lqx.settings.tracking.scrolldepth){lqx.vars.scrollDepthMax=Math.ceil((jQuery(window).scrollTop()+jQuery(window).height())/jQuery(document).height()*10)*10;jQuery(window).on("scrollthrottle",function(){if(lqx.vars.scrollDepthMax<100){lqx.vars.scrollDepthMax=Math.max(lqx.vars.scrollDepthMax,Math.ceil((jQuery(window).scrollTop()+jQuery(window).height())/jQuery(document).height()*10)*10);if(lqx.vars.scrollDepthMax>100)lqx.vars.scrollDepthMax=100}});jQuery(window).on("unload",function(){ga("send",{hitType:"event",eventCategory:"Scroll Depth",eventAction:lqx.vars.scrollDepthMax,nonInteraction:true})})}if(lqx.settings.tracking.photogallery){jQuery("html").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox], a[data-featherlight-image]",function(){ga("send",{hitType:"event",eventCategory:"Photo Gallery",eventAction:"Open"})});jQuery("html").on("load","img.lb-image",function(){ga("send",{hitType:"event",eventCategory:"Photo Gallery",eventAction:"Display",eventLabel:jQuery(this).attr("src")})})}if(lqx.settings.tracking.video){var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";tag.onload=function(){lqx.vars.youTubeIframeAPIReady=true};var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);if(window.addEventListener){window.addEventListener("message",lqx.vimeoReceiveMessage,false)}else{window.attachEvent("onmessage",lqx.vimeoReceiveMessage,false)}lqx.vars.youtubePlayers={};lqx.vars.vimeoPlayers={};jQuery("iframe").each(function(){var elem=jQuery(this);lqx.initVideoPlayerAPI(elem)})}if(lqx.settings.tracking.activetime){jQuery(window).on("unload",function(){ga("send",{hitType:"event",eventCategory:"User Active Time",eventAction:"Percentage",eventValue:parseInt(100*lqx.vars.userActive.activeTime/(lqx.vars.userActive.activeTime+lqx.vars.userActive.inactiveTime)),nonInteraction:true});ga("send",{hitType:"event",eventCategory:"User Active Time",eventAction:"Active Time (ms)",eventValue:parseInt(lqx.vars.userActive.activeTime),nonInteraction:true});ga("send",{hitType:"event",eventCategory:"User Active Time",eventAction:"Inactive Time (ms)",eventValue:parseInt(lqx.vars.userActive.inactiveTime),nonInteraction:true})})}},featherlightMutationHandler:function(mutRec){jQuery(mutRec.addedNodes).each(function(){var elem=jQuery(this);var src=elem.attr("src");if(typeof elem.prop("tagName")!=="undefined"&&elem.hasClass("featherlight-image")){var tag=elem.prop("tagName").toLowerCase();if(tag=="img"&&typeof src!="undefined"){ga("send",{hitType:"event",eventCategory:"Photo Gallery",eventAction:"Display",eventLabel:jQuery(this).attr("src")})}}})},videoPlayerMutationHandler:function(mutRec){jQuery(mutRec.addedNodes).each(function(){var elem=jQuery(this);if(typeof elem.prop("tagName")!=="undefined"){var tag=elem.prop("tagName").toLowerCase();if(tag=="iframe"){lqx.initVideoPlayerAPI(elem)}}})},initVideoPlayerAPI:function(elem){var src=elem.attr("src");var playerId=elem.attr("id");if(typeof src!="undefined"){if(src.indexOf("youtube.com/embed/")!=-1){if(typeof playerId=="undefined"){playerId="youtubePlayer"+Object.keys(lqx.vars.youtubePlayers).length;elem.attr("id",playerId)}if(src.indexOf("enablejsapi=1")==-1){var urlconn="&";if(src.indexOf("?")==-1){urlconn="?"}elem.attr("src",src+urlconn+"enablejsapi=1&version=3")}if(typeof lqx.vars.youtubePlayers[playerId]=="undefined"){lqx.vars.youtubePlayers[playerId]={};onYouTubeIframeAPIReady()}}if(src.indexOf("player.vimeo.com/video/")!=-1){if(typeof playerId=="undefined"){playerId="vimeoPlayer"+Object.keys(lqx.vars.vimeoPlayers).length;elem.attr("id",playerId)}if(src.indexOf("api=1")==-1){var urlconn="&";if(src.indexOf("?")==-1){urlconn="?"}elem.attr("src",src+urlconn+"api=1&player_id="+playerId)}if(typeof lqx.vars.vimeoPlayers[playerId]=="undefined"){lqx.vars.vimeoPlayers[playerId]={}}}}},youtubePlayerReady:function(e,playerId){if(jQuery("#"+playerId).length){if(typeof lqx.vars.youtubePlayers[playerId].playerObj.getPlayerState!="function"){}else{if(typeof lqx.vars.youtubePlayers[playerId].progress=="undefined"){lqx.vars.youtubePlayers[playerId].progress=0;lqx.vars.youtubePlayers[playerId].start=false;lqx.vars.youtubePlayers[playerId].complete=false;var videoData=lqx.vars.youtubePlayers[playerId].playerObj.getVideoData();lqx.vars.youtubePlayers[playerId].title=videoData["title"];lqx.vars.youtubePlayers[playerId].duration=lqx.vars.youtubePlayers[playerId].playerObj.getDuration();if(!lqx.vars.youtubePlayers[playerId].start)lqx.youtubePlayerStateChange(e,playerId)}}}else{delete lqx.vars.youtubePlayers[playerId]}},youtubePlayerStateChange:function(e,playerId){if(jQuery("#"+playerId).length){var label;if(lqx.vars.youtubePlayers[playerId].playerObj.getPlayerState()==0&&!lqx.vars.youtubePlayers[playerId].complete){label="Complete";lqx.vars.youtubePlayers[playerId].complete=true}if(lqx.vars.youtubePlayers[playerId].playerObj.getPlayerState()==1){lqx.vars.youtubePlayers[playerId].timer=setTimeout(function(){lqx.youtubePlayerStateChange(e,playerId)},1e3);if(!lqx.vars.youtubePlayers[playerId].start){label="Start";lqx.vars.youtubePlayers[playerId].start=true}else{currentTime=lqx.vars.youtubePlayers[playerId].playerObj.getCurrentTime();if(Math.ceil(Math.ceil(currentTime/lqx.vars.youtubePlayers[playerId].duration*100)/10)-1>lqx.vars.youtubePlayers[playerId].progress){lqx.vars.youtubePlayers[playerId].progress=Math.ceil(Math.ceil(currentTime/lqx.vars.youtubePlayers[playerId].duration*100)/10)-1;if(lqx.vars.youtubePlayers[playerId].progress!=10){label=lqx.vars.youtubePlayers[playerId].progress*10+"%"}else{clearTimeout(lqx.vars.youtubePlayers[playerId].timer)}}}}if(lqx.vars.youtubePlayers[playerId].playerObj.getPlayerState()==3){lqx.vars.youtubePlayers[playerId].timer=setTimeout(function(){lqx.youtubePlayerStateChange(e,playerId)},1e3)}if(label){lqx.videoTrackingEvent(playerId,label,lqx.vars.youtubePlayers[playerId].title,lqx.vars.youtubePlayers[playerId].progress*10)}}else{delete lqx.vars.youtubePlayers[playerId]}},vimeoReceiveMessage:function(e){if(/^https?:\/\/player.vimeo.com/.test(e.origin)){var data=JSON.parse(e.data);player=lqx.vars.vimeoPlayers[data.player_id];var label;switch(data.event){case"ready":player.progress=0;player.start=false;player.complete=false;lqx.vimeoSendMessage(data.player_id,e.origin,"addEventListener","play");lqx.vimeoSendMessage(data.player_id,e.origin,"addEventListener","finish");lqx.vimeoSendMessage(data.player_id,e.origin,"addEventListener","playProgress");break;case"play":if(!player.start){label="Start";player.start=true}break;case"playProgress":if(Math.ceil(Math.ceil(data.data.percent*100)/10)-1>player.progress){player.progress=Math.ceil(Math.ceil(data.data.percent*100)/10)-1;if(player.progress!=10){label=player.progress*10+"%"}}break;case"finish":if(!player.complete){label="Complete";player.complete=true}}if(label){lqx.videoTrackingEvent(data.player_id,label,"No title",player.progress*10)}}},vimeoSendMessage:function(playerId,origin,action,value){var data={method:action};if(value){data.value=value}document.getElementById(playerId).contentWindow.postMessage(JSON.stringify(data),origin)},videoTrackingEvent:function(playerId,label,title,value){ga("send",{hitType:"event",eventCategory:"Video",eventAction:label,eventLabel:title+" ("+jQuery("#"+playerId).attr("src").split("?")[0]+")",eventValue:value})},initMobileMenu:function(){jQuery("body").on("click",".horizontal ul.menu a, .vertical ul.menu a, .slide-out ul.menu a",function(e){e.preventDefault();lqx.mobileMenu(this)});jQuery("body").on("click",".horizontal, .vertical, .slide-out",function(e){e.stopPropagation()});jQuery("body").on("click",".slide-out .menu-control",function(){var elem=jQuery(this).parent();if(jQuery(elem).hasClass("open")){jQuery(elem).removeClass("open")}else{jQuery(elem).addClass("open")}});jQuery("body").click(function(){jQuery(".horizontal, .vertical, .slide-out").find("ul.menu li.open").removeClass("open");jQuery(".slide-out.open").removeClass("open")})},mobileMenu:function(elem){var li=jQuery(elem).parent();var url=elem.href;var target=elem.target&&!elem.target.match(/^_(self|parent|top)$/i)?elem.target:false;var go=function(){target?window.open(url,target):window.location.href=url};if(jQuery(li).hasClass("deeper")){if(jQuery(li).hasClass("open")){go()}else{jQuery(li).siblings("li.open").find("li.open").removeClass("open");jQuery(li).siblings("li.open").removeClass("open");jQuery(li).addClass("open")}}else{go()}},initMutationObserver:function(){var mo=window.MutationObserver||window.WebKitMutationObserver;if(typeof mo!=="undefined"){lqx.mutationObserver=new mo(lqx.mutationHandler);lqx.mutationObserver.observe(jQuery("html")[0],{childList:true,characterData:true,attributes:true,subtree:true})}else{if(lqx.settings.tracking.video){jQuery("html").on("DOMNodeInserted","iframe",function(e){lqx.initVideoPlayerAPI(jQuery(e.currentTarget))})}if(lqx.settings.tracking.photogallery){jQuery("html").on("DOMNodeInserted","img.featherlight-image",function(e){var src=jQuery(e.currentTarget).attr("src");if(typeof src!="undefined"){ga("send",{hitType:"event",eventCategory:"Photo Gallery",eventAction:"Display",eventLabel:src})}})}}},mutationHandler:function(mutRecs){mutRecs.forEach(function(mutRec){switch(mutRec.type){case"childList":if(mutRec.addedNodes.length>0){lqx.videoPlayerMutationHandler(mutRec);lqx.featherlightMutationHandler(mutRec)}break;case"attributes":break;case"characterData":break}})},initImgLoadAttr:function(){jQuery("body").on("load","img",function(){jQuery(this).attr("loadcomplete","")});jQuery("body").on("error","img",function(){jQuery(this).attr("loaderror","")})},lyqBox:{init:function(){if(jQuery("[data-lyqbox]").length){lqx.lyqBox.album=[];lqx.lyqBox.currentImageIndex=void 0;lqx.lyqBox.enable();lqx.lyqBox.build();var alertPromise=lqx.lyqBox.alert(jQuery("[data-lyqbox-type=alert]"));alertPromise.always(function afterAlertCheck(){lqx.lyqBox.hash()})}},hash:function(){if(window.location.hash.substr(1)!=""){var contentData=window.location.hash.substr(1).split("_");if(jQuery("[data-lyqbox="+contentData[0]+"][data-lyqbox-alias="+contentData[1]+"]").length){lqx.lyqBox.start(jQuery("[data-lyqbox="+contentData[0]+"][data-lyqbox-alias="+contentData[1]+"]"))}}},alert:function(alertbox){var deferred=jQuery.Deferred();if(alertbox.length==1){var cookieName="lyqbox-alert-"+alertbox.attr("data-lyqbox");var alertCookieFound=localStorage.getItem(cookieName);if(alertCookieFound){deferred.reject()}else{lqx.lyqBox.start(alertbox);jQuery(".lyqbox .close").on("click",function alertBoxCloseButtonClicked(){var cookieName="lyqbox-alert-"+lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].albumId;localStorage.setItem(cookieName,1);deferred.resolve();lqx.lyqBox.end();return false})}}else{deferred.reject()}return deferred.promise()},enable:function(){jQuery("body").on("click","[data-lyqbox]",function(event){jQuery(".lyqbox").addClass("open");lqx.lyqBox.start(jQuery(event.currentTarget));return false})},build:function(){jQuery(lqx.settings.lyqBox.lyqboxHTMLContent).appendTo(jQuery("body"));lqx.lyqBox.overlay=jQuery(".lyqbox");lqx.lyqBox.containerActive=lqx.lyqBox.overlay.find(".content-wrapper").first().addClass("active");lqx.lyqBox.overlay.find(".content").on("click",function(){return false});lqx.lyqBox.overlay.on("click",function(){if(lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].type=="alert")return false;lqx.lyqBox.end();return false});lqx.lyqBox.overlay.find(".prev").on("click",function(){if(lqx.lyqBox.currentImageIndex===0){lqx.lyqBox.changeContent(lqx.lyqBox.album.length-1)}else{lqx.lyqBox.changeContent(lqx.lyqBox.currentImageIndex-1)}return false});lqx.lyqBox.overlay.find(".next").on("click",function(){if(lqx.lyqBox.currentImageIndex===lqx.lyqBox.album.length-1){lqx.lyqBox.changeContent(0)}else{lqx.lyqBox.changeContent(lqx.lyqBox.currentImageIndex+1)}return false});lqx.lyqBox.overlay.find(".close").on("click",function(){if(lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].type=="alert")return false;lqx.lyqBox.end();return false})},start:function(data){lqx.lyqBox.album=[];var currentIndex=0;function addToAlbum(data){lqx.lyqBox.album.push({albumId:data.attr("data-lyqbox"),type:data.attr("data-lyqbox-type"),link:data.attr("data-lyqbox-url"),title:data.attr("data-lyqbox-title"),caption:data.attr("data-lyqbox-caption"),credit:data.attr("data-lyqbox-credit"),"class":data.attr("data-lyqbox-class"),alias:data.attr("data-lyqbox-alias"),html:data.attr("data-lyqbox-html")})}var items;var datalyqboxValue=data.attr("data-lyqbox");if(datalyqboxValue){items=jQuery(data.prop("tagName")+'[data-lyqbox="'+datalyqboxValue+'"]');for(var i=0;i<items.length;i=++i){addToAlbum(jQuery(items[i]));if(items[i]===data[0]){currentIndex=i}}}lqx.lyqBox.changeContent(currentIndex)},loadHTML:function(url){var deferred=jQuery.Deferred();var $container=jQuery("<div></div>").load(url,function(response,status){if(status!=="error"){deferred.resolve($container.contents())}deferred.fail()});return deferred.promise()},changeContent:function(index){lqx.lyqBox.disableKeyboardNav();lqx.lyqBox.overlay.addClass("open");var promise=jQuery.Deferred();switch(lqx.lyqBox.album[index].type){case"image":var image=jQuery("<img />");var preloader=new Image;preloader.src=lqx.lyqBox.album[index].link;preloader.onload=function(){var preloaderObject;image.attr("src",lqx.lyqBox.album[index].link);preloaderObject=jQuery(preloader);lqx.lyqBox.updateContent(image,index,lqx.lyqBox.album[index].type);window.location.hash=lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].albumId+"_"+lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].alias;window.getComputedStyle(image[0]).opacity};break;case"video":var video=jQuery("<iframe></iframe>");video.attr("src",lqx.lyqBox.album[index].link);lqx.lyqBox.updateContent('<div class="video-container">'+video.prop("outerHTML")+"</div>",index,lqx.lyqBox.album[index].type);window.location.hash=lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].albumId+"_"+lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].alias;break;case"html":case"alert":if(lqx.lyqBox.album[index].link!=""&&typeof lqx.lyqBox.album[index].link!=="undefined"){promise=lqx.lyqBox.loadHTML(lqx.lyqBox.album[index].link);promise.done(function htmlLoaded(htmlResult){if(htmlResult!="")lqx.lyqBox.updateContent(htmlResult,index,lqx.lyqBox.album[index].type)})}else{lqx.lyqBox.updateContent(lqx.lyqBox.album[index].html,index,lqx.lyqBox.album[index].type)}break;default:break}},updateContent:function(content,index,type){lqx.lyqBox.overlay.find(".content-wrapper").not(".active").addClass("active").find(".content").removeClass().addClass("content "+type).empty().append(content);lqx.lyqBox.containerActive.removeClass("active");lqx.lyqBox.containerActive=lqx.lyqBox.overlay.find(".content-wrapper.active");lqx.lyqBox.currentImageIndex=index;lqx.lyqBox.updateUIandKeyboard()},updateUIandKeyboard:function(){lqx.lyqBox.updateUI();lqx.lyqBox.enableKeyboardNav()},updateUI:function(){if(lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].type!="alert"){if(typeof lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].title!=="undefined"&&lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].title!==""){lqx.lyqBox.overlay.find(".title").html(lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].title)}else{lqx.lyqBox.overlay.find(".title").html("")}if(typeof lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].caption!=="undefined"&&lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].caption!==""){lqx.lyqBox.overlay.find(".caption").html(lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].caption)}else{lqx.lyqBox.overlay.find(".caption").html("")}if(typeof lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].credit!=="undefined"&&lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].credit!==""){lqx.lyqBox.overlay.find(".credit").html(lqx.lyqBox.album[lqx.lyqBox.currentImageIndex].credit)}else{lqx.lyqBox.overlay.find(".credit").html("")}if(lqx.lyqBox.album.length>1){lqx.lyqBox.overlay.find(".current").text(lqx.lyqBox.currentImageIndex+1);lqx.lyqBox.overlay.find(".total").text(lqx.lyqBox.album.length)}else{lqx.lyqBox.overlay.find(".prev,.next").addClass("hide");lqx.lyqBox.overlay.find(".counter").addClass("hide")}}else{lqx.lyqBox.overlay.find(".prev,.next").addClass("hide");lqx.lyqBox.overlay.find(".counter").addClass("hide")}},enableKeyboardNav:function(){jQuery(document).on("keyup.keyboard",jQuery.proxy(lqx.lyqBox.keyboardAction,lqx.lyqBox))},disableKeyboardNav:function(){jQuery(document).off(".keyboard")},keyboardAction:function(event){var KEYCODE_ESC=27;var KEYCODE_LEFTARROW=37;var KEYCODE_RIGHTARROW=39;var keycode=event.keyCode;var key=String.fromCharCode(keycode).toLowerCase();if(keycode===KEYCODE_ESC||key.match(/x|o|c/)){lqx.lyqBox.end()}else if(keycode===KEYCODE_LEFTARROW){if(lqx.lyqBox.currentImageIndex===0){lqx.lyqBox.changeContent(lqx.lyqBox.album.length-1)}else{lqx.lyqBox.changeContent(lqx.lyqBox.currentImageIndex-1)}}else if(keycode===KEYCODE_RIGHTARROW){if(lqx.lyqBox.currentImageIndex===lqx.lyqBox.album.length-1){lqx.lyqBox.changeContent(0)}else{lqx.lyqBox.changeContent(lqx.lyqBox.currentImageIndex+1)}}},removeHash:function(){var scrollV,scrollH,loc=window.location;if("pushState"in history)history.pushState("",document.title,loc.pathname+loc.search);else{scrollV=document.body.scrollTop;scrollH=document.body.scrollLeft;loc.hash="";document.body.scrollTop=scrollV;document.body.scrollLeft=scrollH}},end:function(){lqx.lyqBox.disableKeyboardNav();lqx.lyqBox.overlay.removeClass("open");lqx.lyqBox.removeHash()}},initUserActive:function(){lqx.vars.userActive={active:true,timer:false,throttle:false,lastChangeTime:(new Date).getTime(),activeTime:0,inactiveTime:0};jQuery(window).on("orientationchange resize focusin",function(){lqx.userActive()});jQuery(document).on("mousedown mousemove mouseup wheel keydown keypress keyup touchstart touchmove touchend",function(){lqx.userActive()});jQuery(window).on("focusout",function(){lqx.userInactive()});setInterval(function(){if(lqx.vars.userActive.active){lqx.vars.userActive.activeTime+=(new Date).getTime()-lqx.vars.userActive.lastChangeTime}else{lqx.vars.userActive.inactiveTime+=(new Date).getTime()-lqx.vars.userActive.lastChangeTime}lqx.vars.userActive.lastChangeTime=(new Date).getTime()},lqx.settings.userActive.refresh);lqx.userActive()},userActive:function(){if(!lqx.vars.userActive.throttle){
lqx.vars.userActive.throttle=true;setTimeout(function(){lqx.vars.userActive.throttle=false},lqx.settings.userActive.throttle);if(!lqx.vars.userActive.active){lqx.vars.userActive.active=true;lqx.vars.userActive.inactiveTime+=(new Date).getTime()-lqx.vars.userActive.lastChangeTime;lqx.vars.userActive.lastChangeTime=(new Date).getTime()}lqx.vars.userActive.active=true;clearTimeout(lqx.vars.userActive.timer);lqx.vars.userActive.timer=setTimeout(function(){lqx.userInactive()},lqx.settings.userActive.idleTime)}},userInactive:function(){lqx.vars.userActive.active=false;clearTimeout(lqx.vars.userActive.timer);lqx.vars.userActive.activeTime+=(new Date).getTime()-lqx.vars.userActive.lastChangeTime;lqx.vars.userActive.lastChangeTime=(new Date).getTime()},gaReady:function(tracker){jQuery.Deferred().done(function(){if(lqx.settings.ga.createParams&&typeof lqx.settings.ga.createParams=="object"){var params=lqx.settings.ga.createParams;Object.keys(params).forEach(function(tracker){if(tracker=="default")ga("create",params[tracker].trackingId,params[tracker].cookieDomain,params[tracker].fieldsObject);else ga("create",params[tracker].trackingId,params[tracker].cookieDomain,tracker,params[tracker].fieldsObject)})}},function(){if(lqx.settings.ga.setParams&&typeof lqx.settings.ga.setParams=="object"){var params=lqx.settings.ga.setParams;Object.keys(params).forEach(function(tracker){var cmd="set";if(tracker!="default")cmd=tracker+".set";Object.keys(params[tracker]).forEach(function(fieldName){ga(cmd,fieldName,params[tracker][fieldName])})})}if(lqx.settings.ga.requireParams&&typeof lqx.settings.ga.requireParams=="object"){var params=lqx.settings.ga.requireParams;Object.keys(params).forEach(function(tracker){var cmd="require";if(tracker!="default")cmd=tracker+".require";params[tracker].forEach(function(elem){ga(cmd,elem.pluginName,elem.pluginOptions)})})}if(lqx.settings.ga.provideParams&&typeof lqx.settings.ga.provideParams=="object"){var params=lqx.settings.ga.provideParams;Object.keys(params).forEach(function(tracker){var cmd="provide";if(tracker!="default")cmd=tracker+".provide";params[tracker].forEach(function(elem){ga(cmd,elem.pluginName,elem.pluginConstructor)})})}},function(){if(typeof lqx.settings.ga.customParamsFuncs=="function"){try{lqx.settings.ga.customParamsFuncs()}catch(e){console.log(e)}}},function(){ga("send","pageview");lqx.initTracking()}).resolve()},init:function(){jQuery(document).ready(function(){lqx.bodyScreenSize();lqx.bodyScreenOrientation();lqx.geoLocate();lqx.initImgLoadAttr();lqx.browserFixes();lqx.initLogging();lqx.initMobileMenu();lqx.initEqualHeightRows();lqx.imageCaption();lqx.lineBreakSymbol();lqx.initMutationObserver();lqx.lyqBox.init();lqx.initUserActive()});jQuery(window).load(function(){lqx.bodyScreenSize();lqx.hangingPunctuation();lqx.equalHeightRows()});jQuery(window).scroll(function(){if(!lqx.vars.scrollThrottle){jQuery(document).trigger("scrollthrottle");lqx.vars.scrollThrottle=true;setTimeout(function(){jQuery(document).trigger("scrollthrottle");lqx.vars.scrollThrottle=false},lqx.settings.scrollThrottle.duration)}});jQuery(window).resize(function(){if(!lqx.vars.resizeThrottle){jQuery(document).trigger("resizethrottle");lqx.vars.resizeThrottle=true;setTimeout(function(){jQuery(document).trigger("resizethrottle");lqx.vars.resizeThrottle=false},lqx.settings.resizeThrottle.duration)}});jQuery(window).on("orientationchange",function(){lqx.bodyScreenSize();lqx.bodyScreenOrientation()});jQuery(window).on("screensizechange",function(){lqx.equalHeightRows();lqx.hangingPunctuation()});jQuery(window).on("scrollthrottle",function(){});jQuery(window).on("resizethrottle",function(){lqx.bodyScreenSize()});window.onYouTubeIframeAPIReady=function(){if(lqx.vars.youTubeIframeAPIReady&&typeof YT!=="undefined"&&YT&&YT.Player){for(var playerId in lqx.vars.youtubePlayers){if(typeof lqx.vars.youtubePlayers[playerId].playerObj=="undefined"){lqx.vars.youtubePlayers[playerId].playerObj=new YT.Player(playerId,{events:{onReady:function(e){lqx.youtubePlayerReady(e,playerId)},onStateChange:function(e){lqx.youtubePlayerStateChange(e,playerId)}}})}}}else{lqx.vars.youTubeIframeAPIReadyAttempts++;if(lqx.vars.youTubeIframeAPIReadyAttempts<120)setTimeout("onYouTubeIframeAPIReady()",250)}};return true}()};
